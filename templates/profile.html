<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>CSP Student Bookstore Forum</title>
	<meta content="width=device-width, initial-scale=1" name="viewport">
	<link href="{{ url_for('static',filename='css/index.css') }}" rel="stylesheet" type="text/css">
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome
/4.7.0/css/font-awesome.min.css">

</head>


<body>

    <script>
    function StarsRating(totScore, totVotes) {

        // To prevent code form breaking in case info does not get pulled for some reason
        if (totScore === null) {
            totScore = 0;
        }
        // preventing a divide by 0 error
        if (totVotes === null || totVotes === 0) {
            totVotes = 1;
        }

        // Wound up casting as object in order to make the needed link to the specific table row via querySelector.
        // Handling as getClass or as getElement would not allow script to change CSS dynamically for some reason.
        var ratings = {
            RatingForUser: (totScore / totVotes)
        };

// total number of stars
        const starTotal = 5;

        for (var r in ratings) {
            var starPercentage = (ratings[r] / starTotal) * 100;
            var starPercentageRounded = `${(Math.round(starPercentage / 10) * 10)}%`;
            document.querySelector(`.${r} .starRatings-inner`).style.width = starPercentageRounded;
        }
    }

    </script>

{% include "header.html" %}

<div style="width: 100%;" class="container">
   <div class="homeLeft">
       <div>
		<h4>{% include "flash_message.html" %}</h4>
	</div>
        <h1>{% include "sideNav.html" %}</h1>
   </div>
</div>


	<div class="homeRight" style="float: left ;width:80%">
		<div style="overflow-x:auto;">

			<div id="info" align="left" style="overflow-x:auto;">
                <h1 id="userInfo">User Information:</h1>
                <p align="center" id="proLink"><a href="{{ url_for('updateProfile')}}">(Update Profile Information)</a></p>
                <p>
                    <strong>Name: </strong><br />
                    &nbsp&nbsp&nbsp{% for d in data %}
                    {{ d[0] }} {{ d[1] }}
                    {% endfor %}
                </p>
                <p>
                    <strong>Student ID: </strong><br />
                    &nbsp&nbsp&nbsp{% for d in data %}
                    {{ d[4] }}
                    {% endfor %}
                </p>
                <p>
                    <strong>Email Address: </strong><br />
                    &nbsp&nbsp&nbsp{% for d in data %}
                    {{ d[2] }}
                    {% endfor %}
                </p>
                <p>
                    <strong>Address: </strong><br />
                    &nbsp&nbsp&nbsp{% for d in data %}
                    {{ d[5] + " " + d[6] + ", " + d[7] + " " + d[8]}}
                    {% endfor %}
                </p>
                <p>
                    <strong>Phone Number: </strong><br />
                    &nbsp&nbsp&nbsp{% for d in data %}
                    {{ d[9] }}
                    {% endfor %}
                </p>
                <table>
                    StarsRating({{ d[3] }}, {{ d[11] }});
                    <tr class="RatingForUser">
                        <td>
                            <div class="starRatings-outer">
                                <div class="starRatings-inner"></div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                     <td>
                         <p>Total Votes: {{ d[11] }}</p>
                     </td>
                    </tr>
                </table>
                <p>
                    <strong>Total Reviews: </strong><br />
                    &nbsp&nbsp&nbsp{% for d in data %}
                    {{ d[3] }}
                    {% endfor %}
                </p>

			</div>

{#
            <div class="form-style-5">
            <form method="POST" action="newpost.html" enctype="multipart/form-data">

                <fieldset>
                    <legend><span class="number">1</span> Edit Personal Information</legend>
                    <input name="field1" placeholder="First Name*" type="text">
                    <input name="field2" placeholder="Last Name*"  type="text">
                    <input name="field3" placeholder="Street Address*"  type="text">
                    <input name="field4" placeholder="City*" type="text">
                    <input name="field5" placeholder="State*" type="text">
                    <input name="field6" placeholder="Zip Code*" type="text">
                    <input name="field7" placeholder="Phone Number*" type="text">
                </fieldset>

                <input class="submitchange" type="submit"  value="Apply Changes"> <a href="profile.html"> </a>

            </form>
			</div> #}

		</div>
	</div>

</body>
</html>

